{{ '//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css' | stylesheet_tag }}
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js" defer="defer"></script>


<script>
  function handleCountryChange() {
    const selectedCountry = $('#country').val();
    const currentDate = new Date();

    if (selectedCountry === 'Dubai') {
      if (
        currentDate.getHours() < 13 || 
        (currentDate.getHours() === 13 && currentDate.getMinutes() <= 30) 
      ) {
        $('#date').datepicker('option', 'minDate', 0);
      } else {
        $('#date').datepicker('option', 'minDate', 1);
      }
    } else if (selectedCountry === 'Sharja' || selectedCountry === 'Abu Dhabi') {

      $('#date').datepicker('option', 'minDate', 1);

    } else {

      $('#date').datepicker('option', 'minDate', 0);
    }
    
  }

 </script>
 

<div style="width:300px; clear:both;">
  <p>
    <label for="date">Pick a delivery date:</label>
    <input id="date" type="text" name="attributes[date]" value="{{ cart.attributes.date }}" />
  </p>

</div>

<form id="country-picker-form">
  <label for="country">Select your country:</label>
  <select id="country" name="country">
    <option value="Abu Dhabi">Abu Dhabi</option>
    <option value="Sharja">Sharja</option>
    <option value="Dubai">Dubai</option>
  </select>
</form>

<script>
 window.onload = function() {
    if (window.jQuery) {
      let $ = window.jQuery;

      $(function() {
        $("#date").prop("disabled", true);
        $("select").on("change", function() {
          $("#date").prop("disabled", false);
          let selectedRegion = $(this).val();
          console.log("Selected region:", selectedRegion);
          
        });

        $("#date").datepicker({
          minDate: +1,
          maxDate: '+2M',
          beforeShowDay: $.datepicker.noWeekends
        });
      });
    }
  }
</script>


